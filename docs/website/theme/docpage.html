<||= importPartial "components/head.html" ||>
    <body data-prismjs-copy-timeout="500">
        
    <||= importPartial "components/navbar.html" ||>
        
        <main>
            <div class="columns doccols"><!--is-gapless" style="height: 100vh; overflow-y:auto;">-->
                <!-- SIDEBAR -->
                <||= importPartial "components/sidebar.html" ||>

                <!-- MAIN -->
                <div class="column is-9 p-6 mb-6">

                    <!-- Breadcrumbs -->
                    <||= importPartial "components/breadcrumbs.html" ||>

                    <|| if not? all? @[2 = size pagePath "documentation" = first pagePath  "index" = last pagePath] [ ||>
                        <h2 class="title is-2 is-spaced"><||= switch contains? pagePath "library" ["Library"] [join.with:" " map split.words last pagePath 'x -> capitalize x] ||></h2>
                    <|| ] ||>

                    <|| if? key? W 'modules [ 
                        moduleList: join.with:"\n" map W\modules 'md [
                            ~{- [|to :string md|](|linkTo "documentation/library/"++(to :string md)|)}
                        ]
                    ||>
                        <||= replace replace read.markdown replace replace replace W\content "#" "/" "Library-â€£-" "" "%MODULE_LIST%" moduleList "<ul>" "<ulbd>" "</ul>" "</ulbd>" ||>
                    <|| ] else [ ||>
                        <!-- content -->
                        <||= replace replace read.markdown W\content "<ul>" "<ulbd>" "</ul>" "</ulbd>" ||>
                    <|| ] ||>

                </div>
            </div>
        </main>

<||= importPartial "components/foot.html" ||>