isBalanced: @(s){
	cnt: 0

	loop [chars s] {
		if &="]" {
			if [cnt: cnt-1]<0 -> return false
		} {
			if &="[" -> cnt: cnt+1
		}
    }

    return cnt=0
}

loop 1..9 @(i){
	str: [join [map 0..2*i-1 -> sample #("[" "]") ] ""]
	prints str
	if [isBalanced str] { print " OK" } { print " Not OK" }
}
