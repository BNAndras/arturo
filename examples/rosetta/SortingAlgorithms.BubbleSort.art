bubbleSort [items]{
    loop $(range $(size items)-1 0) [n]{
        swapped false
        loop $(range 0 n-1) [i]{
            if items.[i]>items.[i+1] {
                tmp items.[i+1]
                items.[i+1] items.[i]
                items.[i] tmp
                swapped true
            }
        }
        if $(not swapped) { return items }
    }
    return items
}

print $(bubbleSort #(3 1 2 8 5 7 9 4 6))