"======================================"
" To Memoize or Not To Memoize"
"======================================"

// Get upper limit + memo switch
maxLimit $(to.number @0)

switch $(to.number @1)
memo $(if switch==1 { true }{false})

// Define our fibonacci function (without memoization)
fib: { if (@0<2) { 1 } { $(fib @0-1) + $(fib @0-2) } }

// Define our fibonacci function (WITH memoization)
fibo: $(memoize { if (@0<2) { 1 } { $(fibo @0-1) + $(fibo @0-2) } })


if memo {
	": With memoization\n"
	foreach $(range 1 maxLimit) { 
		print "fib(" + @ + ") = " + $(fibo @) 
	}
} {
	": Without memoization\n"
	foreach $(range 1 maxLimit) { 
		print "fib(" + @ + ") = " + $(fib @) 
	}
}

//fiboMap $(map $(range 1 maxLimit) { fibo @ })
//print fiboMap

