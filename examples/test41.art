"=================================="
"Primality testing (v3.0)"
"=================================="

//isprime: $(memoize [x]{
//	if x<2 -> true
//	? x<2 { -> false }
//})

//is.pri: $(memoize [x]{
//	if x<2 -> false
//	if x=2 { return true }
//	if x%2=0 { return false }
//	each $(range 3 x/2+1 2) {
//		if x%@=0 { return false }
//	}
//	return true
//})

isprime: [x]{
	| x < 2	 	-> false
	| x = 2  	-> true
	| x%2 = 0 	-> false

	each $(range 3 x/2+1 2) {
		| x%@=0 -> false
	}

	-> true
}

//print $(isprime 2)

is.prime: $(memoize [x]{
	if x<2 { return false }

	if x=2 { return true }
	if x%2=0 { return false }
	each $(range 3 x/2+1 2) {
		if x%@=0 { return false }
	}
	return true
})

primes: [n]{ filter $(range 1 n) { isprime @ }}
print $(primes 100)
