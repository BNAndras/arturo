"=========================================="
"Art:uro | Running tests..."
"=========================================="

""

print " ---------------------------------------------------------------------------"
print " " + $(padLeft "Test" 50) + " | " + $(padCenter "Result" 20) + " |"
print " ---------------------------------------------------------------------------"

successful 0
total 0

loop $(sort|map $(filter $(dir "../examples/rosetta") { contains & ".out" }) { replace & ".out" "" }) {
	print " " + $(padLeft & 50) + " | " true
	result $(shell "./arturo " + "examples/rosetta/" + & + ".art")

	total total+1

	if result!=false {
		if $(strip result)=$(strip|read "../examples/rosetta/"+&+".out") {
			successful successful+1
			print $(color $(padCenter "OK" 20) "green") true
		} {
			print $(color $(padCenter ":(" 20) "red") true
		}
	} {
		print $(color $(padCenter ":(" 20) "red") true
	}

	print " |"
}

print " ---------------------------------------------------------------------------"

print ""
print "All tests completed. " + successful + " out of " + total + " successful."
print ""