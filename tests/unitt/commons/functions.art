inplaceEquivalence: $[value :any func :literal params :block][
    ;; returns: [reference, inplaced]
    @[
        call func append @[value] params
        _inplaceOperation value func params
    ]
] 

inplacePathEquivalence: $[value :any func :literal params :block][
    ;; returns: [reference, inplaced]
    @[
        call func append @[value] params
        _inplacedPathOperation value func params
    ]
]

fullInplaceEquivalence: $[value :any func :literal params :block][
    ;; returns: [reference, inplaced, inplaced-path]
    @[
        call func append @[value] params
        _inplaceOperation value func params
        _inplacedPathOperation value func params
    ]
]

_inplaceOperation: $[value :any func :literal params :block][
    inplaced: new value
    call func ['inplaced] ++ params
    return inplaced
]

_inplacedPathOperation: $[value :any func :literal params :block][
    inplaced: #[value: new value]
    call func ['inplaced\value] ++ params
    return inplaced\value
]