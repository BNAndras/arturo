; Helper functions

topic: function [title][
    print ""
    print repeat "*" 30
    print ["*" title]
    print repeat "*" 30
    print ""
    print repeat "-" 50
]

byteCode: function [blk][
    btc: to :bytecode blk
    inspect btc
    print ["input:" as.code blk]
    print ["data:" get btc 'data]
    print ["code:" get btc 'code]
    print repeat "-" 50
]

; Main unit-tests

;*****************************************************************
topic "Boolean values"
;*****************************************************************

byteCode [true]
; ================================
;  DATA
; ================================

; ================================
;  CODE
; ================================
; constbt
; end

byteCode [false]
; ================================
;  DATA
; ================================

; ================================
;  CODE
; ================================
; constbf
; end

byteCode [maybe]
; ================================
;  DATA
; ================================
; 0: maybe :word

; ================================
;  CODE
; ================================
; load0
; end

;*****************************************************************
topic "Integer values"
;*****************************************************************

byteCode [1]
; ================================
;     DATA
; ================================

; ================================
;     CODE
; ================================
; consti1
; end

byteCode [10]
; ================================
;     DATA
; ================================

; ================================
;     CODE
; ================================
; consti10
; end

byteCode [123]
; ================================
;     DATA
; ================================
; 0: 123 :integer

; ================================
;     CODE
; ================================
; push0
; end

byteCode [1234567890123]
; ================================
;     DATA
; ================================
; 0: 1234567890123 :integer

; ================================
;     CODE
; ================================
; push0
; end

;*****************************************************************
topic "Floating values"
;*****************************************************************

byteCode [0.0]
; ================================
;     DATA
; ================================

; ================================
;     CODE
; ================================
; constf0
; end

byteCode [1.0]
; ================================
;     DATA
; ================================

; ================================
;     CODE
; ================================
; constf1
; end

byteCode [10.0]
; ================================
;     DATA
; ================================
; 0: 10.0 :floating

; ================================
;     CODE
; ================================
; push0
; end

byteCode [12345.1234567]
; ================================
;     DATA
; ================================
; 0: 12345.1234567 :floating

; ================================
;     CODE
; ================================
; push0
; end

;*****************************************************************
topic "Char values"
;*****************************************************************

byteCode [`a`]
; ================================
;  DATA
; ================================
; 0: a :char

; ================================
;  CODE
; ================================
; push0
; end

byteCode [`ðŸ˜€`]
; ================================
;  DATA
; ================================
; 0: ðŸ˜€ :char

; ================================
;  CODE
; ================================
; push0
; end

;*****************************************************************
topic "String values"
;*****************************************************************

byteCode [""]
; ================================
;  DATA
; ================================

; ================================
;  CODE
; ================================
; consts
; end

byteCode ["Hello World!"]
; ================================
;  DATA
; ================================
; 0: Hello World! :string

; ================================
;  CODE
; ================================
; push0
; end

;*****************************************************************
topic "Regex values"
;*****************************************************************

byteCode [{/hello/}]
; ================================
;  DATA
; ================================
; 0: hello :regex

; ================================
;  CODE
; ================================
; push0
; end

byteCode [{/[A-Z]+\d/}]
; ================================
;  DATA
; ================================
; 0: [A-Z]+\d :regex

; ================================
;  CODE
; ================================
; push0
; end

;*****************************************************************
topic "Type values"
;*****************************************************************

byteCode [:integer]
; ================================
;  DATA
; ================================
; 0: integer :type

; ================================
;  CODE
; ================================
; push0
; end

byteCode [:string]
; ================================
;  DATA
; ================================
; 0: string :type

; ================================
;  CODE
; ================================
; push0
; end

;*****************************************************************
topic "Literal values"
;*****************************************************************

byteCode ['a]
; ================================
;  DATA
; ================================
; 0: a :literal

; ================================
;  CODE
; ================================
; push0
; end

byteCode ['a 'b 'c]
; ================================
;  DATA
; ================================
; 0: a :literal
; 1: b :literal
; 2: c :literal

; ================================
;  CODE
; ================================
; push0
; push1
; push2
; end

;*****************************************************************
topic "Null values"
;*****************************************************************

byteCode [Ã¸]
; ================================
;  DATA
; ================================

; ================================
;  CODE
; ================================
; constn
; end

byteCode [null]
; ================================
;  DATA
; ================================
; 0: null :word

; ================================
;  CODE
; ================================
; load0
; end
